
# Evaluation

- **Status:** Accepted.
- **Application Document:** [Asylum Follow Up](https://github.com/w3f/Grants-Program/blob/master/applications/asylum_follow_up_1.md). 
- **Milestone:** 3
- **Kusama Identity:** Address
- **Previously successfully merged evaluation:** [M2 evaluation](https://github.com/w3f/Grant-Milestone-Delivery/blob/master/evaluations/asylum_2_lucasvanmol.md)

**Deliverables**

| Number | Deliverable | Accepted | Link | Evaluation Notes |
| ------ | ----------- | -------- | ---- |----------------- |
| 0a.    | License | <ul><li>[x] </li></ul> |  [Asylum UI](https://gitlab.com/asylum-space/asylum-ui/-/blob/main/LICENSE), [Asylum Node](https://gitlab.com/asylum-space/asylum-item-nft/-/blob/main/LICENSE), [Asylum Unity SDK](https://gitlab.com/asylum-space/asylum-unity-sdk/-/blob/main/LICENSE) | ok. |
| 0b.    |  Documentation | <ul><li>[x] </li></ul> | [Unity SDK](https://gitlab.com/asylum-space/asylum-unity-sdk/-/tree/main/Docs)| ok. |
| 0c.    | Testing Guide | <ul><li>[x] </li></ul> | [Testing Guide](https://gitlab.com/asylum-space/asylum-ui/-/blob/main/docs/testing-guide-patterns.md) | ok. |
| 0d.    | Docker | <ul><li>[x] </li></ul> | - | ok. |
| 0e.    | Article | <ul><li>[x] </li></ul> | - | ok. |
| 1.     | Unity SDK | <ul><li>[x] </li></ul> | [Asylum Unity SDK Documentation](https://gitlab.com/asylum-space/asylum-unity-sdk/-/blob/main/README.md) | Ok |
| 1.1    | Unity SDK | <ul><li>[x] </li></ul> | [Unity SDK](https://gitlab.com/asylum-space/asylum-unity-sdk/-/commit/dc5f18fbace0b6051e14b396a2191e851c8bcfa8), [Ajuna NetApi Extension for Asylum](https://gitlab.com/asylum-space/asylum-net-api)| Ok |
| 1.2    | Unity SDK | <ul><li>[x] </li></ul> | [Unity Editor Extension](https://gitlab.com/asylum-space/asylum-unity-sdk/-/blob/main/AsylumSDK/AsylumPlugin.cs) | ok |
| 1.3    | Unity SDK | <ul><li>[x] </li></ul> | [React](https://gitlab.com/asylum-space/asylum-unity-sdk/-/blob/main/AsylumSDK/ReactClient.cs), [Standalone](https://gitlab.com/asylum-space/asylum-unity-sdk/-/blob/main/AsylumSDK/StandaloneClient.cs) | ok |
| 1.4    | Unity SDK | <ul><li>[x] </li></ul> | [UML diagram](https://gitlab.com/asylum-space/asylum-unity-sdk/-/blob/main/Docs/img/UML.png) | ok. |
| 1.5    | Unity SDK | <ul><li>[x] </li></ul> | [Async assets loading](https://gitlab.com/asylum-space/asylum-unity-sdk/-/blob/main/AsylumSDK/AsylumInterpretationAsyncHandler.cs) | ok. |
| 1.6    | Unity SDK | <ul><li>[x] </li></ul> | [Editor extension](https://gitlab.com/asylum-space/asylum-unity-sdk/-/blob/main/Docs/AsylumPluginEditor.md), [React](https://gitlab.com/asylum-space/asylum-unity-sdk/-/blob/main/Docs/ReactClient.md), [Standalone](https://gitlab.com/asylum-space/asylum-unity-sdk/-/blob/main/Docs/StandaloneClient.md) | ok |
| 2.     | 3D Game | <ul><li>[x] </li></ul> | - | ok. |
| 2.1    | 3D Game | <ul><li>[x] </li></ul> | [3D Game build](https://gitlab.com/asylum-space/asylum-ui/-/tree/main/packages/connection-library/data/dark-forest), [Testing guide](https://gitlab.com/asylum-space/asylum-ui/-/blob/main/docs/testing-guide-patterns.md#verification) | ok. |
| 2.2    | 3D Game | <ul><li>[x] </li></ul> | [3D Game build](https://gitlab.com/asylum-space/asylum-ui/-/tree/main/packages/connection-library/data/dark-forest), [Testing guide](https://gitlab.com/asylum-space/asylum-ui/-/blob/main/docs/testing-guide-patterns.md#verification) | ok. |
| 2.3    | 3D Game | <ul><li>[x] </li></ul> | [3D Game build](https://gitlab.com/asylum-space/asylum-ui/-/tree/main/packages/connection-library/data/dark-forest), [Testing guide](https://gitlab.com/asylum-space/asylum-ui/-/blob/main/docs/testing-guide-patterns.md#verification) | ok. |
| 2.4    | 3D Game | <ul><li>[x] </li></ul> | [3D Game build](https://gitlab.com/asylum-space/asylum-ui/-/tree/main/packages/connection-library/data/dark-forest), [Testing guide](https://gitlab.com/asylum-space/asylum-ui/-/blob/main/docs/testing-guide-patterns.md#case-3-interoperable-items-and-drop) | ok. |
| 3.     | In-game items association | <ul><li>[x] </li></ul> | - | ok. |
| 3.1    | In-game items association | <ul><li>[x] </li></ul> | [Create blueprint from pattern](https://gitlab.com/asylum-space/asylum-ui/-/commit/736f86fb4036afd464cb3ab139cfb626f318df78), [Testing guide](https://gitlab.com/asylum-space/asylum-ui/-/blob/main/docs/testing-guide-patterns.md#case-1-creating-a-blueprint-from-a-pattern) | ok. |
| 3.2    | In-game items association | <ul><li>[x] </li></ul> | [Adapt blueprint to pattern](https://gitlab.com/asylum-space/asylum-ui/-/commit/736f86fb4036afd464cb3ab139cfb626f318df78), [Testing guide](https://gitlab.com/asylum-space/asylum-ui/-/blob/main/docs/testing-guide-patterns.md#case-2-adapt-blueprint-to-pattern) | ok. |
| 3.3    | In-game items association | <ul><li>[x] </li></ul> | [3D model viewer](https://gitlab.com/asylum-space/asylum-ui/-/commit/28807b7727461ce004ddb7ba30634bf1c1535c20) | ok. |
| 4.     | Renamings | <ul><li>[x] </li></ul> | [Asylum Node](https://gitlab.com/asylum-space/asylum-item-nft/-/commit/3fde1677386e1f84aa11c438d14f0adf297b55d4), [Asylum UI](https://gitlab.com/asylum-space/asylum-ui/-/commit/cd2eb4cf55232402706541e4e25be6b48df1a93a), [Asylum Unity SDK](https://gitlab.com/asylum-space/asylum-unity-sdk/-/commit/093b6872d59e7ddbce8ee5ec686e602475ed2a58) | ok. |


## General notes
----
Context

The third milestone covers:
 - upgrade Asylum Unity SDK to work in Unity Play Mode and Standalone build (with the help of substrate client of AjunaSDK);
 - implementation of Unity Editor extension;
 - implementation of a 3D game, which utilizes Asylum features;
 - Creators studio functionality was extended - blueprint patterns added.
-----
## Evaluation V3

Now e2e and Unity SDK tests are all running and passing. The Typescript lint errors are still there but the system works besides that. Furthermore, it is easy to remove them. Just disable some typescript lint rules by adding the following configuration to .eslintrc.js. 

```
"rules": {
    "@typescript-eslint/ban-types": "off",
    "@typescript-eslint/no-inferrable-types": "off",
    "@typescript-eslint/no-namespace": "off",
    "@typescript-eslint/no-var-requires": "off",
    "@typescript-eslint/ban-ts-comment": "off"
}
```

## Evaluation V2

### Testing Guide

Unity SDK in standalone mode worked well and Case 3 either.

### Code Quality

#### asylum-item-nft (Rust Node)

Automated tests coverage - ok:

- Asylum Blueprints – lib.rs (87.02%) (+8.40%) - Improved.
- Asylum Off-chain Minter – lib.rs (75.00%) (+75.00%) - Improved.
- Asylum Spaces – lib.rs (87.84%) (+1.26%) - Improved.

Static Analysis (clippy) - ok:


- warning: `pallet-asylum-blueprints` (lib) generated 6 warnings - same as before
- warning: `pallet-asylum-spaces` (lib) generated 49 warnings - same as before.
- warning: `local-runtime` (lib) generated 0 warning - improved
- warning: `asylum-runtime` (lib) generated 0 warning - improved
- warning: `node-asylum` (lib) generated 2 warnings - improved


Documentation - ok:

Now there is more documentation and it is compatible with rustdoc.

Just for notice, this warning was generated by the doc command, maybe could be interesting to solve.
```
warning: public documentation for `command_helper` links to private item `super::command`
  --> node/src/asylum/mod.rs:9:1
   |
9  | / /// Testnet command helper
10 | | pub mod command_helper;
11 | |
12 | | pub use service::{new_partial, start_asylum_node, ExecutorDispatch, RuntimeApi};
...  |
   |
   = note: `#[warn(rustdoc::private_intra_doc_links)]` on by default
   = note: the link appears in this line:
           
           Contains code to setup the command invocations in [`super::command`] which would
                                                              ^^^^^^^^^^^^^^^^
   = note: this link will resolve properly if you pass `--document-private-items`

warning: `node-asylum` (lib doc) generated 1 warning
```


#### Asylum-ui (front-end)


Using docker, after running this command `yarn docker:test:up` I got these errors when I opened the web application (creators studio):

```
Compiled with problems:

ERROR


src/components/hr/hr.tsx
  Line 10:50:  Don't use `{}` as a type. `{}` actually means "any non-nullish value".
- If you want a type meaning "any object", you probably want `Record<string, unknown>` instead.
- If you want a type meaning "any value", you probably want `unknown` instead.
- If you want a type meaning "empty object", you probably want `Record<string, never>` instead  @typescript-eslint/ban-types

src/components/text/heading-lg.tsx
  Line 6:67:  Don't use `{}` as a type. `{}` actually means "any non-nullish value".
- If you want a type meaning "any object", you probably want `Record<string, unknown>` instead.
- If you want a type meaning "any value", you probably want `unknown` instead.
- If you want a type meaning "empty object", you probably want `Record<string, never>` instead  @typescript-eslint/ban-types

src/components/text/heading-xl.tsx
  Line 6:67:  Don't use `{}` as a type. `{}` actually means "any non-nullish value".
- If you want a type meaning "any object", you probably want `Record<string, unknown>` instead.
- If you want a type meaning "any value", you probably want `unknown` instead.
- If you want a type meaning "empty object", you probably want `Record<string, never>` instead  @typescript-eslint/ban-types

src/components/text/heading.tsx
  Line 6:65:  Don't use `{}` as a type. `{}` actually means "any non-nullish value".
- If you want a type meaning "any object", you probably want `Record<string, unknown>` instead.
- If you want a type meaning "any value", you probably want `unknown` instead.
- If you want a type meaning "empty object", you probably want `Record<string, never>` instead  @typescript-eslint/ban-types

src/components/text/paragraph.tsx
  Line 6:67:  Don't use `{}` as a type. `{}` actually means "any non-nullish value".
- If you want a type meaning "any object", you probably want `Record<string, unknown>` instead.
- If you want a type meaning "any value", you probably want `unknown` instead.
- If you want a type meaning "empty object", you probably want `Record<string, never>` instead  @typescript-eslint/ban-types

src/components/three-viewer/three-viewer.tsx
  Line 9:4:  ES2015 module syntax is preferred over custom TypeScript modules and namespaces  @typescript-eslint/no-namespace

src/modules/wallet-connect/wallet-connect.tsx
  Line 28:13:  Do not use "@ts-ignore" because it alters compilation errors  @typescript-eslint/ban-ts-comment

src/store/app-store.ts
  Line 10:4:  Type boolean trivially inferred from a boolean literal, remove type annotation  @typescript-eslint/no-inferrable-types
  Line 11:4:  Type boolean trivially inferred from a boolean literal, remove type annotation  @typescript-eslint/no-inferrable-types
  Line 12:4:  Type boolean trivially inferred from a boolean literal, remove type annotation  @typescript-eslint/no-inferrable-types

Search for the keywords to learn more about each error.
```

I also was not able to run the tests since in the browser controlled from cypress there is no Polkadot.js plugin and there are no instructions on how to install it in the tutorial. See the print screen below:

![screen](https://user-images.githubusercontent.com/112647953/195175384-8f225416-dfca-471a-aa96-96d78c3a88bd.jpg)


There is no automated test. - They exist but there is a minor problem to run them. 

Eslint report: 94 problems (14 errors, 80 warnings). - Improved

Now - 58 problems (14 errors, 44 warnings)
  3 errors and 0 warnings are potentially fixable with the `--fix` option.

There is no code documentation. Improved, there are some documentation in JSDoc and also Storybook which help to document and see the components of the application.

#### Asylum-unity-sdk (Unity)

There is no automated test. - Improved. There are automated tests. The coverage is about 65%.

![coverage-unity](https://user-images.githubusercontent.com/112647953/195175431-c365f797-a63d-4f0b-a4b0-79607a332f90.jpg)


There are some tests not passing, but this could be because of my machine. The reason for the test fail is a timeout and in my machine, the tests are taking a long time to run.

![unit-test-report-unity](https://user-images.githubusercontent.com/112647953/195175460-b48adab9-9a11-4518-a87b-11849b0d042c.jpg)


Some classes don’t have code documentation. - Improved, now some classes have code documentation.


## Evaluation V1


### SDK in Standalone Mode

I'm not a Unity specialist, then some of my doubts and problems here could be for a lack of expertise with this technology. I tried to run the Unit SDK example project and stopped in the error below. In some way should be needed to import the SDK library into the project. As there are no specific instructions for that in the testing guide I stopped in this step. Could you please inform me in more detail how to bypass this problem and continue with the testing?

![image](https://user-images.githubusercontent.com/112647953/191799266-8f18e779-9473-4f6c-bea6-090854abff41.png)

### Testing Guide

Cases 1 and 2 worked well.

Case 3: Interoperable Items and Drop, I had a problem: 

`yarn seed:demo` – results in the following error (running inside and outside docker container)

![image](https://user-images.githubusercontent.com/112647953/191799459-42b357c6-82fb-4f1f-ac6b-fe5a7d5c4bd8.png)

### Code Quality

#### asylum-item-nft (Rust Node)

Automated tests coverage:


- Asylum Blueprints – lib.rs (78.63%) - Some methods and paths are not covered.
- Asylum Off-chain Minter – lib.rs (0%) - Not covered at all. Please review. 
- Asylum Spaces – lib.rs (86.58%) - Some error paths are not covered.

Static Analysis (clippy):


- warning: `pallet-asylum-blueprints` (lib) generated 6 warnings
- warning: `pallet-asylum-spaces` (lib) generated 49 warnings
- warning: `local-runtime` (lib) generated 1 warning
- warning: `asylum-runtime` (lib) generated 1 warning
- warning: `node-asylum` (lib) generated 4 warnings


Please review and fix the ones that make sense. 


Documentation:

There is some code documentation, however, some methods lack documentation or are format non-compatible with rustdoc. Please review. 


#### Asylum-ui (front-end)

There is no automated test.

Eslint report: 94 problems (14 errors, 80 warnings). 

There is no code documentation.

#### Asylum-unity-sdk (Unity)

There is no automated test.

Some classes don’t have code documentation.




