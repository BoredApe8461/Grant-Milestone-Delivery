# Evaluation

- **Status:** Accepted
- **Application Document:** https://github.com/w3f/Grants-Program/blob/master/applications/ParaSpell_follow-up.md
- **Milestone:** 2 
- **Kusama Identity:** Address
- **Previously successfully merged evaluation:** N/A

| Number | Deliverable | Accepted | Link | Evaluation Notes |
| ------ | ----------- | -------- | ---- |----------------- |
| 0a. | License | <ul><li>[x] </li></ul>|[MIT](https://github.com/paraspell/sdk/blob/main/LICENSE)| MIT| 
| 0b.  | Documentation | <ul><li>[x] </li></ul> |[Usage guide file](https://github.com/paraspell/xcm-sdk/blob/main/README.md)| | 
| 0c.  | Testing guide | <ul><li>[x] </li></ul> |[Added tests PR](https://github.com/paraspell/xcm-sdk/pull/19), [Testing guide](https://github.com/paraspell/xcm-sdk/tree/main/#-development)| | 
| 0d.  | Docker | <ul><li>[x] </li></ul> |[Commit updating UI to newest version](https://github.com/paraspell/ui-v1/commit/5dea10c4e814b7f0123441858c907c31fca0b081), [Guide on launching dockerized version](https://github.com/paraspell/ui#start-application-in-docker-container) | | 
| 1.  | Add support for checking data that does not change | <ul><li>[x] </li></ul> |[Implementing constants that do not change like node id and asset decimals](https://github.com/paraspell/sdk/commit/aea02541f7168d7a7f566b7311fcf70f6a977115)|  | 
| 2 | Rewrite SDK to builder pattern | <ul><li>[x] </li></ul> |[Builder pattern commit](https://github.com/paraspell/sdk/commit/74fba22522449a75ecdc82a394ff2336d9c1ec05), [Builder pattern usage guide](https://github.com/paraspell/xcm-sdk/tree/main#currently-implemented-pallets)|  | 
| 3.  | Make a map of compatible <chain, pallet> | <ul><li>[x] </li></ul> |[xcmPallet map feature](https://github.com/paraspell/xcm-sdk/commit/8faa6ffb4e3e8640dd4a59008d2d456a1be0cefd), [usage guide for testing](https://github.com/paraspell/xcm-sdk/commit/c6f4bfa810444eab9f101dcdc2062ff7d7ca86b0)|  | 
| 4.  | Use [turborepo](https://turbo.build/) | <ul><li>[x] </li></ul> |[Monorepo branch](https://github.com/paraspell/xcm-sdk/tree/beta-monorepo)| | 

## Evaluation V3

After considering the balance constraints explained [here](https://github.com/w3f/Grant-Milestone-Delivery/pull/715#issuecomment-1416347119) the transaction worked and the events were shown after the finalization of the transaction. As an improvement, please consider adding the balance observation in the tutorial of the software. Please consider either to report this possible bug with XCM. If it is not a bug, at least someone can help to identify how to identify the case when the XCM transaction is not completed (the balance is not transferred).


## Evaluation V2

Using UI-V1 most of the examples provided for manual testing worked well. However, in the transaction from Parachain to Relay Chain the the events were not emitted and seems that the values were not transferred. The application shows a msg that the transaction was successful. Could you assist with that? 

![image](https://user-images.githubusercontent.com/112647953/216679088-15ac65c0-e18a-431d-9e4d-70f01ad9aa11.png)

![image](https://user-images.githubusercontent.com/112647953/216679348-62de240e-f900-4cfe-a743-f3a9d0a97c51.png)

![image](https://user-images.githubusercontent.com/112647953/216679430-e5dadfbb-2c83-45d9-aba0-165c3a424b57.png)


The automated test coverage is still the same. (Not mandatory to fix)

## Evaluation V1

### System tests

There are some deliverables that lack complete executable examples for verification, i.e., they need programming. I should not need to do programming for verifying the deliverables. Please provide complete and executable examples for testing the deliverables. 


### Code Quality

UI-V1:  There is no automated test for the user interface.

SDK: 

There are no static analysis warnings generated by eslint.

The test covered is reasonable and could have some improvements

```
pnpm runAll

> @paraspell/sdk@0.0.26 runAll /home/user/Documents/xcm-sdk
> pnpm compile && pnpm format:write && pnpm lint && pnpm test


> @paraspell/sdk@0.0.26 compile /home/user/Documents/xcm-sdk
> tsc --noEmit


> @paraspell/sdk@0.0.26 format:write /home/user/Documents/xcm-sdk
> prettier --write src/**/*.ts

src/maps/consts.ts 215ms
src/pallets/pallets.test.ts 17ms
src/pallets/pallets.ts 9ms
src/scripts/scriptUtils.ts 30ms
src/scripts/updateAssets.ts 64ms
src/scripts/updatePallets.ts 13ms

> @paraspell/sdk@0.0.26 lint /home/user/Documents/xcm-sdk
> eslint --fix --ext .ts,.js,.mjs,.cjs .


> @paraspell/sdk@0.0.26 test /home/user/Documents/xcm-sdk
> vitest run --coverage


 RUN  v0.28.3 /home/user/Documents/xcm-sdk
      Coverage enabled with c8

 ✓ src/pallets/pallets.test.ts (2)
 ✓ src/pallets/assets/assets.test.ts (10)
 ✓ src/pallets/xcmPallet/transfer.test.ts (2)
 ✓ src/utils.test.ts (2)
 ✓ src/pallets/builder/builders/Builder.test.ts (10) 17409ms

 Test Files  5 passed (5)
      Tests  26 passed (26)
   Start at  12:01:16
   Duration  19.88s (transform 449ms, setup 1ms, collect 3.38s, tests 17.52s)

 % Coverage report from c8
------------------------------|---------|----------|---------|---------|-------------------------------------------------------
File                          | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                     
------------------------------|---------|----------|---------|---------|-------------------------------------------------------
All files                     |   58.11 |    94.85 |   81.69 |   58.11 |                                                       
 src                          |    5.76 |       90 |      30 |    5.76 |                                                       
  utils.ts                    |    5.76 |       90 |      30 |    5.76 | 8-10,13-21,24-187,190-294,297-342,345-459,462-623,636 
 src/maps                     |     100 |      100 |     100 |     100 |                                                       
  consts.ts                   |     100 |      100 |     100 |     100 |                                                       
 src/pallets                  |     100 |      100 |     100 |     100 |                                                       
  pallets.ts                  |     100 |      100 |     100 |     100 |                                                       
 src/pallets/assets           |   96.55 |    91.66 |   88.88 |   96.55 |                                                       
  assets.ts                   |   96.49 |    91.66 |   88.88 |   96.49 | 56-57                                                 
  index.ts                    |     100 |      100 |     100 |     100 |                                                       
 src/pallets/builder/builders |     100 |      100 |     100 |     100 |                                                       
  AddLiquidityBuilder.ts      |     100 |      100 |     100 |     100 |                                                       
  Builder.ts                  |     100 |      100 |     100 |     100 |                                                       
  BuyBuilder.ts               |     100 |      100 |     100 |     100 |                                                       
  CloseChannelBuilder.ts      |     100 |      100 |     100 |     100 |                                                       
  CreatePoolBuilder.ts        |     100 |      100 |     100 |     100 |                                                       
  OpenChannelBuilder.ts       |     100 |      100 |     100 |     100 |                                                       
  RelayToParaBuilder.ts       |     100 |      100 |     100 |     100 |                                                       
  RemoveLiquidityBuilder.ts   |     100 |      100 |     100 |     100 |                                                       
  SellBuilder.ts              |     100 |      100 |     100 |     100 |                                                       
  SendBuilder.ts              |     100 |      100 |     100 |     100 |                                                       
 src/pallets/hrmp             |   53.84 |      100 |      50 |   53.84 |                                                       
  channelsClose.ts            |      50 |      100 |      50 |      50 | 6-11                                                  
  index.ts                    |     100 |      100 |     100 |     100 |                                                       
 src/pallets/parasSudoWrapper |   33.33 |      100 |      50 |   33.33 |                                                       
  channels.ts                 |      30 |      100 |      50 |      30 | 6-19                                                  
  index.ts                    |     100 |      100 |     100 |     100 |                                                       
 src/pallets/xcmPallet        |   43.65 |    69.23 |    62.5 |   43.65 |                                                       
  InvalidCurrencyError.ts     |     100 |      100 |     100 |     100 |                                                       
  index.ts                    |     100 |      100 |     100 |     100 |                                                       
  nodeNotSupportedError.ts    |   33.33 |      100 |       0 |   33.33 | 3-6                                                   
  transfer.ts                 |    40.7 |    63.63 |      75 |    40.7 | 43-82,86-112                                          
 src/pallets/xyk              |   44.44 |      100 |      50 |   44.44 |                                                       
  index.ts                    |     100 |      100 |     100 |     100 |                                                       
  xyk.ts                      |   43.39 |      100 |      50 |   43.39 | 11,15-22,26-32,36-41,45-52                            
------------------------------|---------|----------|---------|---------|-------------------------------------------------------

```
